---
title: "S1_CUSM_VISUALISATION_DES_DONNÉES"
format:
    html:
        toc: true
        toc-depth: 5
        toc-title: "Table of contents"
        toc-location: left
        toc-sticky: true
        number-sections: true
        theme: default

    docx:
        toc: true
        toc-depth: 5

    pdf:
        toc: true
        toc-depth: 5
        pdf-engine: xelatex
        number-sections: true
        header-includes: |
            % Réduit automatiquement la taille des titres des graphiques avant qu'ils ne dépassent
            \usepackage{graphicx}
            \usepackage{adjustbox}
            % Réduction automatique de la taille des titres des figures (plots R)
            \makeatletter
            \AtBeginEnvironment{figure}{\small}
            \makeatother
            \usepackage{fontspec} 
            \setmainfont{Helvetica}
            \usepackage{etoolbox}
            \renewcommand{\contentsname}{}
            \AtBeginDocument{
                \addtocontents{toc}{\protect\smallskip}
                \let\oldtableofcontents\tableofcontents
                \renewcommand{\tableofcontents}{
                \begingroup
                    \footnotesize
                    \setlength{\parskip}{2pt}
                    \oldtableofcontents
                \endgroup
                }
            }
            \setcounter{tocdepth}{5}
            \makeatletter
            \renewcommand{\@tocrmarg}{0pt}
            \makeatother
            \usepackage{fvextra}
            \usepackage[section]{placeins}
            \usepackage{needspace}
            \usepackage{float}
            \floatplacement{figure}{H}
            \floatplacement{table}{H}
            \newcommand{\sectionbreak}{\needspace{5\baselineskip}}
            \setlength{\parindent}{0pt}
            \setlength{\parskip}{4pt}
            \usepackage[most]{tcolorbox}
            \usepackage{color}
            \definecolor{lightgray}{gray}{0.95}
            \newtcolorbox{graybox}{colback=gray!10!white,colframe=black,boxrule=0.6pt,arc=1mm,left=6pt,right=6pt,top=4pt,bottom=4pt}
            \newtcolorbox{codebox}{breakable,colback=blue!5!white,colframe=blue!50!black,boxrule=0.5pt,arc=1mm,left=4pt,right=4pt,top=3pt,bottom=3pt}
            \DefineVerbatimEnvironment{CodeBoxContent}{Verbatim}{fontsize=\small,breaklines,breakanywhere}
            \renewcommand{\thesection}{\arabic{section}}
            \renewcommand{\thesubsection}{\thesection.\Alph{subsection}}
            \renewcommand{\thesubsubsection}{\thesubsection.\arabic{subsubsection}}

geometry: margin=2.5cm
---

```{r}
#| label: setup
#| include: false
#| echo: false
library(forecast)
library(plotrix)
library(viridisLite)
library(ggplot2)
library(survminer)
library(treemap)
library(psy)
library(qgraph)
library(ape)
library(survival)
library(httpgd)
library(psy)
knitr::opts_chunk$set(echo = TRUE)

load("~/Documents/Projets/M2biostatistiques/Cours/CUSM_data/CUSM")
data("CUSM")
gs <- read.csv2("~/Documents/Projets/M2biostatistiques/Cours/CUSM_data/GoogleSuicide20172022.csv")
load("~/Documents/Projets/M2biostatistiques/Cours/CUSM_data/dataAQRlivre")
data(expsy)
alzh = read.csv("~/Documents/Projets/M2biostatistiques/Cours/alzheimer.csv")
```

# VISUALISATION DES DONNÉES

## Distribution d'une variable quantitative

Très important de pouvoir visualiser la distribution d'une variable quantitative avant de faire des analyses statistiques. 

Le top : objectiver la normalité donc histogramme + Q-Q plot pour tests paramétriques ou non ensuite

### Histogramme 

-   Regroupe les données en classes (intervalles de valeurs)

-   Souffre d'effet de bord : la forme peut changer selon le choix des classes

```{r}
hist(smp$age, xlab="Age", ylab="Fréquence", col="white", cex.axis=1.8, cex.lab=1.8, main="")
box()
```

*Figure 1 : Histogramme représentant la distribution de l’âge des détenus de l’étude santé mentale en prison. L’axe des y indique le nombre de sujets par tranches d’âge de 5 ans.* 

*La distribution est asymétrique, avec un effet plancher légèrement en dessous de 20 ans, en lien avec l’âge limite pour être incarcéré dans un établissement pénitencier pour adulte*

#### Variante d'histogramme

Représenter sur un même schéma les distributions d'une variable quantitative observée dans plusieurs groupes.

Distribution de l’âge des détenus en fonction de leur niveau de recherche de nouveauté.
1 : faible ; 2 : modéré ; 3 : élevé.

```{r}
vir_3 <- viridis(n = 3) # palette de 3 couleurs

x <- list(
    smp$age[smp$recherche.nouv==1], 
    smp$age[smp$recherche.nouv==2],
    smp$age[smp$recherche.nouv==3])

multhist(
    x, 
    ylab="Fréquence", 
    xlab="Age", 
    ylim=c(0,70), # ajuster selon les données
    col=vir_3, 
    legend.text=paste("Recherche de Nouveauté. = ",1:3))
box()
```

*Histogrammes multiples représentant les distributions de l’âge de détenus ayant, respectivement, un faible niveau de recherche de nouveauté (R.N. = 1), un niveau modéré (R.N. = 2) ou un niveau élevé (R.N. = 3).*

*La distribution des sujets « R.N. = 1 » semble décalée vers la gauche (ces sujets seraient donc globalement plus jeunes).*




